(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(45)},37:function(e,t,a){},38:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),c=a.n(i),o=(a(37),a(17)),s=a(15),l=(a(38),a(2)),u=a(3),d=a(5),g=a(4),m=a(6),f=a(7),p=a(28),h=function(e){return console.log(e)},v=function(e){var t=e.onClick,a=e.title,n=e.active,i=e.modifiers;return r.a.createElement("div",{onClick:function(){return"function"===typeof(e=t)&&e();var e},className:Object(f.a)("selectable-tag",[{active:n},i])},a)},y={sport:{cid:1,title:"sport"},business:{cid:2,title:"biznes"},life:{cid:3,title:"\u017cycie i media"},movies:{cid:4,title:"filmy"},technology:{cid:5,title:"technologia"},health:{cid:6,title:"zdrowie i uroda"},politics:{cid:7,title:"polityka"},games:{cid:8,title:"gry i rozrywka"},travel:{cid:9,title:"turystyka i podr\xf3\u017ce"}},b={index:"/",article:"/article/:article_slug"},E=function(e){var t=e.children,a=e.pathTo;return r.a.createElement(o.b,{to:a?b[a]:b.index},t)},j=["index"],O=function(e){return j.find(function(t){return t===e})},S=function(e){var t=e.pageName,a=e.toggleFilterMenu,n=e.modifiers;return r.a.createElement("div",{className:Object(f.a)("header",[t,n])},r.a.createElement("div",{className:"header__content-container"},r.a.createElement("div",{className:"header__left-side"},r.a.createElement("h1",null,"Artyku\u0142y")),r.a.createElement("div",{className:"header__right-side"},O("index")&&r.a.createElement(v,{title:"filtruj",onClick:a,modifiers:["filter","header"]}),O("article")&&r.a.createElement(E,null,r.a.createElement(v,{title:"Powr\xf3t",modifiers:["filter","header","home"]})))))},k=function(e){var t=e.pageName,a=e.modifiers;return r.a.createElement("div",{className:Object(f.a)("footer",[t,a])},r.a.createElement("div",{className:"footer__text"},"Designed and built by:"),r.a.createElement("a",{className:"footer__link",href:"https://www.linkedin.com/in/mateusz-kowalski-62b758113/"},"Mateusz Kowalski"))},N=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pageName,a=e.displayHeader,n=void 0===a||a,i=e.displayFooter,c=void 0===i||i,o=e.modifiers,s=Object(p.a)(e,["pageName","displayHeader","displayFooter","modifiers"]);return r.a.createElement("div",{className:Object(f.a)("layout",o)},n&&r.a.createElement(S,Object.assign({},s,{pageName:t})),r.a.createElement("div",{className:"layout__main"},this.props.children),c&&r.a.createElement(k,Object.assign({},s,{pageName:t})))}}]),t}(n.Component),_=function(e){var t=e.title,a=e.children,n=e.componentsAside,i=e.modifiers;return r.a.createElement("div",{className:Object(f.a)("page-section",i)},r.a.createElement("div",{className:"page-section__header"},r.a.createElement("h2",{className:"page-section__title"},t),r.a.createElement("div",{className:"page-section__aside"},n)),r.a.createElement("div",{className:"page-section__body"},a))},w=function(e){var t=e.category,a=e.changeCategory,n=Object.values(y);return r.a.createElement(_,{title:"Kategorie"},r.a.createElement("div",{className:"category-selector"},n.map(function(e){var n=e.cid,i=e.title,c=n===t;return r.a.createElement(v,{key:n,title:i,active:c,onClick:function(){return!c&&a(n)},modifiers:"category"})})))},T=function(e){var t=e.closeFilters;return r.a.createElement("div",{className:"filter-section-header"},r.a.createElement("div",{className:"filter-section-header__prompt"},"Dostosuj Filtry"),r.a.createElement(v,{title:"zamknij",onClick:t,modifiers:["filter","header"]}))},x=a(16),M=a(9),A=a.n(M),C=a(18),D=a(14),F=a(31),P=new F.GraphQLClient("https://mobileapi.wp.pl/v1/graphql",{headers:{}}),$=function(e,t){return P.request(e,t)},z=function(e){return $("\n   query getCategoryTags ($t: [ArticleType]!, $cid: Int!) {\n      articles (t: $t, cid: $cid) {\n        tags\n      }\n   }\n",{t:["Article"],cid:e})},I=function(e){return $("\n    query getArticles ($t: [ArticleType]!, $cid: Int!, $tags: [String], $offset: Int, $limit: Int) {\n        articles (t: $t, cid: $cid, tags: $tags, offset: $offset, limit: $limit) {\n            title\n            author {\n                name\n            }\n            url\n            id\n            tags\n            img {\n                title\n                url\n                h\n                w\n                author\n                source\n                description\n                   \n            }\n        }\n    }\n",Object(C.a)({t:["Article"]},e))},L=function(e){return $("\n    query getSingleArticle ($url: String!) {\n        article (url: $url) {\n            title\n            author {\n                name\n            }\n            id\n            img {\n                title\n                url\n                h\n                w\n                author\n                source\n                description   \n            }\n            body {\n                data\n            }\n        }\n    }\n",{url:e})},H=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader__circle"}))},q=function(e){var t=e.title,a=e.img,n=a.url,i=void 0===n?null:n,c=a.title,o=e.tags,s=void 0===o?[]:o,l=e.url;return r.a.createElement("div",{className:"article"},r.a.createElement("img",{className:"article__image",src:i,alt:c}),r.a.createElement("div",{className:"article__content"},r.a.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer ",className:"article__link-wrapper"},r.a.createElement("h3",{className:"article__title"},t)),r.a.createElement("div",{className:"article__tags"},s.map(function(e,t){return r.a.createElement(v,{key:t,title:e,modifiers:"in-article"})}))))},R=function(e){var t=e.onClick;return r.a.createElement("div",{onClick:t,className:"articles-container__load-more"},"Wi\u0119cej")},U=function(e){var t=e.data,a=e.loadMorePages,n=e.hasMore,i=e.loadingState,c=function(e){return i===e},o=n&&!c("loading");return r.a.createElement("div",{className:"articles-container"},c("loading")&&r.a.createElement(H,null),c("no-articles")&&r.a.createElement("div",null,"Brak artyku\u0142\xf3w!"),c("failed")&&r.a.createElement("div",null,"co\u015b Posz\u0142o nie tak!"),c("success")&&r.a.createElement(r.a.Fragment,null,t&&t.map(function(e){return r.a.createElement(q,Object.assign({},e,{key:e.id}))}),o&&r.a.createElement(R,{onClick:a})))},W="loading",B=!0,J=15,K=1,G=function(e){return(e-1)*J},Q=function(e){return e%J===0},Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],loadingState:W,currentPageNumber:K,hasMore:!0},a.updateDataState=function(e){return a.setState({data:e})},a.updateLoadingState=function(e){return a.setState({loadingState:e})},a.updateHasMoreState=function(e){return a.setState({hasMore:e})},a.reinitializeState=function(){return a.setState({loadingState:W,currentPageNumber:K,hasMore:B})},a.fetchTagsData=function(){var e=Object(D.a)(A.a.mark(function e(t){var n,r,i,c,o,s;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.cid,i=n.tags,e.prev=1,e.next=4,I(Object(C.a)({cid:r,tags:i,limit:J},t));case 4:return o=e.sent,s=o.articles.length,e.next=8,a.updateDataState(o.articles);case 8:if(!(s<J)){e.next=11;break}return e.next=11,a.updateHasMoreState(!1);case 11:c=s?"success":"no-articles",e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),h(e.t0.message),c="failed";case 18:a.updateLoadingState(c);case 19:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t){return e.apply(this,arguments)}}(),a.initiateReFetch=Object(D.a)(A.a.mark(function e(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.reinitializeState();case 2:a.fetchTagsData();case 3:case"end":return e.stop()}},e)})),a.fetchMorePages=Object(D.a)(A.a.mark(function e(){var t,n,r,i,c,o,s,l,u;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.cid,r=t.tags,i=a.state,c=i.currentPageNumber,o=i.data,s=c+1,e.prev=3,e.next=6,I({cid:n,tags:r,offset:G(s),limit:J});case 6:if(l=e.sent,(u=l.articles.length)&&a.setState({data:[].concat(Object(x.a)(o),Object(x.a)(l.articles)),currentPageNumber:s}),!(u<J)){e.next=12;break}return e.next=12,a.updateHasMoreState(!1);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),h(e.t0.message),a.updateHasMoreState(!1);case 18:case"end":return e.stop()}},e,null,[[3,14]])})),a.loadMorePages=function(){if(Q(a.state.data.length))return a.fetchMorePages();a.updateHasMoreState(!1)},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetchTagsData()}},{key:"componentDidUpdate",value:function(e,t,a){var n=e.cid,r=e.tags,i=this.props,c=i.cid,o=i.tags,s=n!==c,l=(r.length>0&&r)!==(o.length>0&&o);if(s||l)return this.initiateReFetch()}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.hasMore,n=e.loadingState;return r.a.createElement(U,{data:t,loadMorePages:this.loadMorePages,hasMore:a,loadingState:n})}}]),t}(n.Component),V=function(e){var t=e.controlsArray,a=e.modifiers;return r.a.createElement("div",{className:Object(f.a)("aside-controls",a)},t.map(function(e,t){var a=e.title,n=e.onClick,i=e.modifier;return r.a.createElement(v,{key:t,title:a,onClick:n,modifiers:i})}))},X=function(e){var t=e.tagsArray,a=e.activeTagsArray,n=e.toggleTag,i=e.controls,c=e.loadingState,o=function(e){return c===e};return r.a.createElement(_,{title:"Wybierz Tagi",componentsAside:r.a.createElement(V,{controlsArray:i})},r.a.createElement("div",{className:"tags-selector"},o("loading")&&r.a.createElement(H,null),o("no-tags")&&r.a.createElement("div",{className:"tags-selector__error"},"Ta kategoria nie posiada tag\xf3w"),o("failed")&&r.a.createElement("div",{className:"tags-selector__error"},"Co\u015b posz\u0142o nie tak!"),o("success")&&r.a.createElement(r.a.Fragment,null,t.map(function(e,t){var i=a.find(function(t){return t===e});return r.a.createElement(v,{key:t,title:e,active:i,onClick:function(){return n(e)},modifiers:"tags"})}))))},Y=function(e){return e.replace(/\s/g,"")},ee=function(e){var t=e.filter(function(e,t,a){return a.indexOf(e)===t}),a=function(e){return e.reduce(function(e,t){return e[Y(t)]=1,e},{})}(t);return function(e,t){e.forEach(function(e){var a=Y(e);t[a]=t[a]+1})}(e,a),t.sort(function(e,t){return a[Y(t)]-a[Y(e)]})},te=function(e){return ee(function(e){return e.reduce(function(e,t){var a=t.tags;return[].concat(Object(x.a)(e),Object(x.a)(a))},[])}(e))},ae=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={tagsArray:[]},a.setTagArrayState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.setState({tagsArray:e})},a.toggleTagInArrayState=function(e){var t=a.state.tagsArray,n=t.find(function(t){return t===e})?t.filter(function(t){return t!==e}):[].concat(Object(x.a)(t),[e]);a.setTagArrayState(n)},a.manageTagErasing=function(){a.state.tagsArray.length&&(a.props.updateParentTagsState(),a.setTagArrayState())},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){e.category!==this.props.category&&this.setTagArrayState()}},{key:"render",value:function(){var e=this.props,t=e.data.articles,a=void 0===t?[]:t,n=e.updateParentTagsState,i=this.state.tagsArray,c=[{title:"Zastosuj",onClick:function(){return n(i)},modifier:"apply"},{title:"Usu\u0144",onClick:this.manageTagErasing,modifier:"eraser"}];return r.a.createElement(X,Object.assign({tagsArray:te(a),activeTagsArray:i,toggleTag:this.toggleTagInArrayState,controls:c},this.props))}}]),t}(n.Component),ne="loading",re=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},loadingState:ne},a.updateDataState=function(e){return a.setState({data:e})},a.updateLoadingState=function(e){return a.setState({loadingState:e})},a.fetchTagsData=Object(D.a)(A.a.mark(function e(){var t,n;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(a.props.category);case 3:return n=e.sent,e.next=6,a.updateDataState(n);case 6:t=n.articles.length?"success":"no-tags",e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),h(e.t0.message),t="failed";case 13:a.updateLoadingState(t);case 14:case"end":return e.stop()}},e,null,[[0,9]])})),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetchTagsData()}},{key:"componentDidUpdate",value:function(e,t,a){e.category!==this.props.category&&(this.updateLoadingState("loading"),this.fetchTagsData())}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.loadingState;return r.a.createElement(ae,Object.assign({refetchData:this.fetchTagsData,data:t,loadingState:a},this.props))}}]),t}(n.Component),ie=y.technology.cid,ce=[],oe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={filterMenuOpen:!1,category:ie,activeTags:ce},a.toggleFilterMenuState=function(){return a.setState(function(e){return{filterMenuOpen:!e.filterMenuOpen}})},a.changeCategoryState=function(e){return a.setState({category:e,activeTags:ce})},a.changeTagsState=function(e){return a.setState({activeTags:e})},a.updateTagsState=function(e){a.state.activeTags!==e&&e&&a.changeTagsState(e),!e&&a.state.activeTags.length&&a.changeTagsState(ce)},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.category,a=e.filterMenuOpen,n=e.activeTags;return r.a.createElement("div",{className:"index-page"},r.a.createElement(N,{toggleFilterMenu:this.toggleFilterMenuState,pageName:"index"},r.a.createElement("div",{className:Object(f.a)("index-page__filter-section",{active:a})},r.a.createElement(T,{closeFilters:this.toggleFilterMenuState}),r.a.createElement(w,{category:t,changeCategory:this.changeCategoryState}),r.a.createElement(re,{category:t,updateParentTagsState:this.updateTagsState,closeFilterMenu:this.toggleFilterMenuState})),r.a.createElement(Z,{cid:t,tags:n})))}}]),t}(n.Component),se=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"I am article page")}}]),t}(n.Component),le=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"I am error page")}}]),t}(n.Component),ue={loading:H,success:se,error:le},de=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},loadingState:"loading"},a.updateDataState=function(e){return a.setState({data:e})},a.updateLoadingState=function(e){return a.setState({loadingState:e})},a.callForPageResources=Object(D.a)(A.a.mark(function e(){var t,n,r;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=void 0===t?{}:t,e.prev=1,e.next=4,L({url:n.article_slug});case 4:return r=e.sent,e.next=7,a.updateDataState(r);case 7:a.updateLoadingState("success"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),h(e.t0.message),a.updateLoadingState("error");case 14:case"end":return e.stop()}},e,null,[[1,10]])})),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.callForPageResources()}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.loadingState,n=ue[a];return r.a.createElement(n,{data:t})}}]),t}(n.Component),ge=function(){return r.a.createElement(o.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:b.index,component:oe}),r.a.createElement(s.a,{path:b.article,component:de}),r.a.createElement(s.a,{component:le})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.5a8244ea.chunk.js.map